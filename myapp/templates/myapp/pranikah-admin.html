{% extends 'myapp/headfooter2.html' %}
{% load static %}
{% block content %}
<section class="eve-deta-pg py-5">
    <div class="container">
        <div class="eve-deta-pg-main">
            <div class="lhs">
                <div class="img">
                    <img id="image-preview" src="{% static 'myapp/images/gambar_pranikah.jpg' %}" class="card-img-top" alt="Pranikah">
                </div>
                <div class="head"> <span class="dat"><b>07</b> Jan</span>
                    <h1>Pranikah eps 1</h1>
                </div>
            </div>
			<div class="rhs">
				<div class="list-rhs-form pglist-bg pglist-p-com">
					<div class="quote-pop">
						<h3>Ikuti Zoom ini!</h3>
						<div id="blog_detail_enq_success" class="log" style="display: none;">
							<p>Your Enquiry Is Submitted Successfully</p>
						</div>
						<div id="blog_detail_enq_same" class="log" style="display: none;">
							<p>You cannot make enquiry on your own blog</p>
						</div>
						<div id="blog_detail_enq_fail" class="log" style="display: none;">
							<p>Something Went Wrong!!!</p>
						</div>
						<form method="post" name="blog_detail_enquiry_form" id="blog_detail_enquiry_form">
							<input type="hidden" class="form-control" name="blog_id" value="17" placeholder="" required>
							<input type="hidden" class="form-control" name="listing_user_id" value="44" placeholder="" required>
							<input type="hidden" class="form-control" name="enquiry_sender_id" value="37" placeholder="" required>
							<input type="hidden" class="form-control" name="enquiry_source" value="Website" placeholder="" required>
							<div class="form-group">
								<input type="text" name="enquiry_name" value="Rn53 Themes" required="required" class="form-control" placeholder="Enter name*">
							</div>
							<div class="form-group">
								<input type="email" class="form-control" placeholder="Enter email*" required="required" value="rn53themes@gmail.com" name="enquiry_email" pattern="^[\w]{1,}[\w.+-]{0,}@[\w-]{2,}([.][a-zA-Z]{2,}|[.][\w-]{2,}[.][a-zA-Z]{2,})$" title="Invalid email address">
							</div>
							<div class="form-group">
								<input type="text" class="form-control" value="5522114422" name="enquiry_mobile" placeholder="Enter mobile number *" pattern="[7-9]{1}[0-9]{9}" title="Phone number starting with 7-9 and remaing 9 digit with 0-9" required>
							</div>
							<div class="form-group">
								<textarea class="form-control" rows="3" name="enquiry_message" placeholder="Enter your query or message"></textarea>
							</div>
							<input type="hidden" id="source">
							<button type="submit" name="enquiry_submit" class="btn btn-primary">Pembayaran</button>
						</form>
					</div>
				</div>
			</div>
        </div>
    </div>
</section>
<section class=" eve-deta-body blog-deta-body">
	<div class="container">
		<div class="eve-deta-body-main">
			<div class="lhs">
				<div class="list-rhs-form pglist-bg pglist-p-com">
					<div class="quote-pop">
						<h3>Tambah Kelas Pranikah!</h3>
						<div id="blog_detail_enq_success" class="log" style="display: none;">
							<p>Your Enquiry Is Submitted Successfully</p>
						</div>
						<div id="blog_detail_enq_same" class="log" style="display: none;">
							<p>You cannot make enquiry on your own blog</p>
						</div>
						<div id="blog_detail_enq_fail" class="log" style="display: none;">
							<p>Something Went Wrong!!!</p>
						</div>
	
						<!-- Form Tambah Kelas Pranikah -->
						<h2>Tambah Kelas Pranikah</h2>
	
						<!-- Pesan Sukses -->
						{% if messages %}
						<div class="alert alert-success" role="alert" style="margin-bottom: 15px;">
							{% for message in messages %}
							{{ message }}
							{% endfor %}
						</div>
						{% endif %}
	
						<!-- Preview Gambar Upload -->
						<div class="form-group" id="image-preview-container" style="display: none; margin-bottom: 20px;">
							<label>Preview Gambar</label><br>
							<img id="image-preview" src="#" alt="Preview Gambar" style="max-width: 100%; height: auto;">
						</div>
	
						<form method="post" action="{% url 'pranikah-admin' %}" enctype="multipart/form-data">
							{% csrf_token %}
							<div class="form-group">
								<label for="id_nama_kelas">Nama Kelas</label>
								<input type="text" class="form-control" id="id_nama_kelas" name="nama_kelas" required>
							</div>
							<div class="form-group">
								<label for="id_tanggal">Tanggal Kelas</label>
								<input type="date" class="form-control" id="id_tanggal" name="tanggal" required>
							</div>
							<div class="form-group">
								<label for="id_gambar">Gambar Kelas</label>
								<input type="file" class="form-control" id="id_gambar" name="gambar" required>
							</div>
							<div class="form-group">
								<label for="id_deskripsi">Deskripsi</label>
								<textarea class="form-control" id="id_deskripsi" name="deskripsi" rows="3" required></textarea>
							</div>
							<div class="form-group">
								<label for="id_link_zoom">Link Zoom</label>
								<input type="url" class="form-control" id="id_link_zoom" name="link_zoom" required>
							</div>
							<div class="form-group">
								<label for="id_pembayaran">Link Pembayaran</label>
								<input type="url" class="form-control" id="id_pembayaran" name="pembayaran" required>
							</div>
							<button type="submit" class="btn btn-primary">Tambah Kelas</button>
						</form>
	
						<!-- Pesan Sukses Dibawah Tombol -->
						{% if form.is_valid %}
						<div class="mt-3">
							<p class="text-success">Kelas pranikah berhasil ditambahkan!</p>
						</div>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- JavaScript untuk menampilkan preview gambar -->
<script>
    // Ambil elemen input file dan preview gambar
    const fileInput = document.getElementById('id_gambar');
    const imagePreview = document.getElementById('image-preview');
    const previewContainer = document.getElementById('image-preview-container');

    // Ketika file gambar dipilih
    fileInput.addEventListener('change', function() {
        const file = fileInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                imagePreview.src = e.target.result;
                previewContainer.style.display = 'block';
            };
            reader.readAsDataURL(file);
        } else {
            previewContainer.style.display = 'none';
        }
    });
</script>

{% endblock %}
